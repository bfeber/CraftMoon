[gd_scene load_steps=4 format=3 uid="uid://b58iek08ffik4"]

[ext_resource type="PackedScene" uid="uid://gwjjy0frd8kj" path="res://gadgets/gadget.tscn" id="1_0cjpd"]

[sub_resource type="GDScript" id="GDScript_82jo0"]
script/source = "extends Gadget


@onready var timer := $Timer as Timer
@onready var bar := $ProgressBar as ProgressBar

var first_shot := true


func _process(delta: float) -> void:
	super._process(delta)
	if input_data == true:
		if timer.is_stopped() and first_shot:
			timer.start()
			first_shot = false
		bar.value = 1 - timer.time_left / timer.wait_time


func execute_once() -> void:
	timer.start()


func change_property(property: StringName, value: Variant) -> void:
	match property:
		&\"OneShot\":
			timer.one_shot = value
"

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_itddp"]

[node name="TimerGadget" instance=ExtResource("1_0cjpd")]
script = SubResource("GDScript_82jo0")

[node name="ProgressBar" type="ProgressBar" parent="." index="0"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_styles/background = SubResource("StyleBoxEmpty_itddp")
max_value = 1.0
fill_mode = 3
show_percentage = false

[node name="OutputControl" parent="." index="3"]
tooltip_text = "Timer Done"

[node name="Timer" type="Timer" parent="." index="5"]
one_shot = true
